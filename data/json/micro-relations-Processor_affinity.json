{"cursor":"5859","size":15,"audio":[],"currentlang":"en","article":"{{multiple issues|\n\n\n\n}} 'Processor affinity' or 'CPU Pinning' enables the mapping and un-mapping of\nan entire virtual machine or specific virtual CPU (vCPU) to a physical CPU or a\nrange of CPUs. It is a modification of the native central queue scheduling\nalgorithm in a symmetric multiprocessing operating system. Each task (be it\nprocess or thread) in the queue has a tag indicating its preferred / kin\nprocessor. At allocation time, each task is allocated to its kin processor in\npreference to others.\n\nProcessor affinity takes advantage of the fact that some remnants of a process\nmay remain in one processor's state (in particular, its cache) from the last\ntime the process ran. Scheduling it to run on the same processor the next time\ncould result in the process's running more efficiently by reducing performance-\ndegrading situations such as cache misses. A practical example might be running\nmultiple instances of an application which does not use multiple threads, such\nas some graphics-rendering software. Processor affinity is meant to increase\nsystem efficiency, overall.\n\nScheduling algorithm implementations vary in adherence to processor affinity.\nUnder certain circumstances some implementations will allow a task to change to\nanother processor if this is deemed to be most efficient. This may be the case\nif two processor-intensive tasks (A and B) have affinity to one processor while\nanother processor lies unused. Many algorithms would shift task B to the second\nprocessor in order to maximize processor use. Task B would then acquire affinity\nwith the second processor while task A would continue to have affinity with the\noriginal processor.\n\nProcessor affinity can effectively reduce cache problems but it does not curb\nthe persistent load-balancing\nproblem. [http://www.tmurgent.com/WhitePapers/ProcessorAffinity.pdf White\nPaper - Processor Affinity] - From [http://www.tmurgent.com tmurgent.com].\nAccessed 2007-07-06. Further, processor affinity becomes more complicated\nin systems with non-uniform architectures. For example, a system with two dual-\ncore hyper-threaded CPUs presents a challenge to a scheduling algorithm. There\nis complete affinity between two virtual CPUs implemented on the same core via\nhyper-threading, partial affinity between two cores on the same physical chip\n(as the cores share some, but not all, cache), and no affinity between separate\nphysical chips.\n\nAs other resources are also shared, processor affinity alone cannot be used as\nthe basis for CPU dispatching. If a process has recently run on one virtual hyper-\nthreaded CPU in a given core, and that virtual CPU is currently busy but its\npartner is not, cache affinity would suggest that the process should be\ndispatched to the idle partner. However, the two virtual CPUs compete for\nessentially all computing, cache, and memory resources. It would typically be\nmore efficient in this case to dispatch the process to a different core or CPU\nif one is available. This would likely incur a penalty when process repopulates\nthe cache, but overall performance would likely be higher as the process would\nnot have to compete for resources within the CPU.\n\nOn Linux the CPU affinity of a process might be altered with the taskset(1)\nprogram [http://www.linuxcommand.org/man_pages/taskset1.html taskset] - From\n[http://www.linuxcommand.org LinuxCommand.org]. Accessed 2007-07-06. and\nthe sched_setaffinity(2) system call, and the affinity of a thread with one of\nthe library functions pthread_setaffinity_np(3) and\npthread_attr_setaffinity_np(3). On SGI systems, [http://techpubs.sgi.com/library/tpl/cgi-\nbin/getdoc.cgi?coll=linux&db=man&fname=/usr/share/catman/man1/dplace.1.html\ndplace] binds a process to a set of CPUs. [http://techpubs.sgi.com/library/tpl/cgi-\nbin/getdoc.cgi?coll=linux&db=man&fname=/usr/share/catman/man1/dplace.1.html\ndplace.1] - From [http://www.sgi.com sgi.com]. Accessed 2007-07-06. NetBSD\n5.0, FreeBSD 7.2 and later versions can use pthread_setaffinity_np and pthread_getaffinity_np. [http://netbsd.gw.com/cgi-bin/man-\ncgi?affinity++NetBSD-current affinity(3)] - NetBSD manpage In NetBSD, the\npsrset utility [http://netbsd.gw.com/cgi-bin/man-cgi?psrset++NetBSD-current\npsrset(8)] - NetBSD manpage to set a thread's affinity to a certain CPU\nset. In FreeBSD, cpuset [http://man.freebsd.org/cpuset cpuset(1)] - FreeBSD\nmanpage utility is used to create CPU sets and to assign processes to\nthese sets. On Windows NT, thread and process CPU affinities can be set\nseparately by using SetThreadAffinityMask [http://msdn2.microsoft.com/en-\nus/library/ms686247(VS.85).aspx SetThreadAffinityMask] - MSDN Library and\nSetProcessAffinityMask [http://msdn2.microsoft.com/en-\nus/library/ms686223(VS.85).aspx SetProcessAffinityMask] - MSDN Library API\ncalls or via the Task Manager interface (for process affinity only). Mac OS X\nexposes an [http://developer.apple.com/library/mac/#releasenotes/Performance/RN-\nAffinityAPI/index.html affinity API] that provides hints to the kernel how to\nschedule threads according to affinity sets.\n","linknr":147,"url":"Processor_affinity","recorded":1363406338,"links":["/w/index.php?title=Processor_affinity&action=edit","/w/index.php?title=Processor_affinity&action=edit","//en.wikipedia.org/apple-touch-icon.png","//bits.wikimedia.org/favicon/wikipedia.ico","/w/opensearch_desc.php","//en.wikipedia.org/w/api.php?action=rsd","//creativecommons.org/licenses/by-sa/3.0/","/w/index.php?title=Special:RecentChanges&feed=atom","//bits.wikimedia.org/en.wikipedia.org/load.php?debug=false&lang=en&modules=ext.gadget.DRN-wizard%2CReferenceTooltips%2Ccharinsert%2Cteahouse%7Cext.wikihiero%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmw.PopUpMediaTransform%7Cskins.vector&only=styles&skin=vector&*","//bits.wikimedia.org/en.wikipedia.org/load.php?debug=false&lang=en&modules=site&only=styles&skin=vector&*","//bits.wikimedia.org/en.wikipedia.org/load.php?debug=false&lang=en&modules=startup&only=scripts&skin=vector&*","//bits.wikimedia.org/geoiplookup","//meta.wikimedia.org","#mw-head","#p-search","//upload.wikimedia.org/wikipedia/en/f/f4/Ambox_content.png","//en.wikipedia.org/w/index.php?title=Processor_affinity&action=edit","/wiki/Talk:Processor_affinity","//upload.wikimedia.org/wikipedia/en/thumb/f/f2/Edit-clear.svg/40px-Edit-clear.svg.png","/wiki/Wikipedia:Cleanup","/wiki/Wikipedia:Manual_of_Style","//en.wikipedia.org/w/index.php?title=Processor_affinity&action=edit","//upload.wikimedia.org/wikipedia/commons/thumb/5/52/Acap.svg/36px-Acap.svg.png","/wiki/Wikipedia:Basic_copyediting","//en.wikipedia.org/w/index.php?title=Processor_affinity&action=edit","//upload.wikimedia.org/wikipedia/en/thumb/f/f2/Edit-clear.svg/40px-Edit-clear.svg.png","/wiki/Help:Section","/wiki/MOS:HEAD","/wiki/Scheduling_algorithm","/wiki/Symmetric_multiprocessing","/wiki/Process_(computing)","/wiki/Thread_(computing)","/wiki/Central_processing_unit","/wiki/CPU_cache","/wiki/Load_balancing_(computing)","#cite_note-1","/wiki/Multi-core_processor","/wiki/Hyper-threading","/wiki/Central_processing_unit","/wiki/Linux","#cite_note-2","/wiki/Silicon_Graphics","http://techpubs.sgi.com/library/tpl/cgi-bin/getdoc.cgi?coll=linux&db=man&fname=/usr/share/catman/man1/dplace.1.html","#cite_note-3","/wiki/NetBSD","/wiki/FreeBSD","#cite_note-4","/wiki/NetBSD","#cite_note-5","/wiki/FreeBSD","#cite_note-6","/wiki/Windows_NT","#cite_note-7","#cite_note-8","/wiki/Mac_OS_X","http://developer.apple.com/library/mac/#releasenotes/Performance/RN-AffinityAPI/index.html","/w/index.php?title=Processor_affinity&action=edit&section=1","/wiki/Affinity_mask","/w/index.php?title=Processor_affinity&action=edit&section=2","#cite_ref-1","http://www.tmurgent.com/WhitePapers/ProcessorAffinity.pdf","http://www.tmurgent.com","#cite_ref-2","http://www.linuxcommand.org/man_pages/taskset1.html","http://www.linuxcommand.org","#cite_ref-3","http://techpubs.sgi.com/library/tpl/cgi-bin/getdoc.cgi?coll=linux&db=man&fname=/usr/share/catman/man1/dplace.1.html","http://www.sgi.com","#cite_ref-4","http://netbsd.gw.com/cgi-bin/man-cgi?affinity++NetBSD-current","#cite_ref-5","http://netbsd.gw.com/cgi-bin/man-cgi?psrset++NetBSD-current","#cite_ref-6","http://man.freebsd.org/cpuset","#cite_ref-7","http://msdn2.microsoft.com/en-us/library/ms686247(VS.85).aspx","/wiki/MSDN_Library","#cite_ref-8","http://msdn2.microsoft.com/en-us/library/ms686223(VS.85).aspx","/wiki/MSDN_Library","/w/index.php?title=Processor_affinity&action=edit&section=3","http://cpubalancer.brels.net/","http://en.wikipedia.org/w/index.php?title=Processor_affinity&oldid=542954329","/wiki/Help:Categories","/wiki/Category:Scheduling_algorithms","/wiki/Category:Articles_needing_cleanup_from_December_2012","/wiki/Category:All_articles_needing_cleanup","/wiki/Category:Cleanup_tagged_articles_with_a_reason_field_from_December_2012","/wiki/Category:Wikipedia_pages_needing_cleanup_from_December_2012","/wiki/Category:Wikipedia_articles_needing_copy_edit_from_December_2012","/wiki/Category:All_articles_needing_copy_edit","/wiki/Category:Articles_needing_sections_from_December_2012","/wiki/Category:All_articles_needing_sections","/wiki/Category:Articles_covered_by_WikiProject_Wikify_from_December_2012","/wiki/Category:All_articles_covered_by_WikiProject_Wikify","/w/index.php?title=Special:UserLogin&returnto=Processor+affinity&type=signup","/w/index.php?title=Special:UserLogin&returnto=Processor+affinity","/wiki/Processor_affinity","/wiki/Talk:Processor_affinity","#","/wiki/Processor_affinity","/w/index.php?title=Processor_affinity&action=edit","/w/index.php?title=Processor_affinity&action=history","#","/w/index.php","//bits.wikimedia.org/static-1.21wmf10/skins/vector/images/search-ltr.png?303-4","/wiki/Main_Page","/wiki/Main_Page","/wiki/Portal:Contents","/wiki/Portal:Featured_content","/wiki/Portal:Current_events","/wiki/Special:Random","//donate.wikimedia.org/wiki/Special:FundraiserRedirector?utm_source=donate&utm_medium=sidebar&utm_campaign=C13_en.wikipedia.org&uselang=en","/wiki/Help:Contents","/wiki/Wikipedia:About","/wiki/Wikipedia:Community_portal","/wiki/Special:RecentChanges","/wiki/Wikipedia:Contact_us","/wiki/Special:WhatLinksHere/Processor_affinity","/wiki/Special:RecentChangesLinked/Processor_affinity","/wiki/Wikipedia:File_Upload_Wizard","/wiki/Special:SpecialPages","/w/index.php?title=Processor_affinity&oldid=542954329","/w/index.php?title=Processor_affinity&action=info","/w/index.php?title=Special:Cite&page=Processor_affinity&id=542954329","/w/index.php?title=Special:Book&bookcmd=book_creator&referer=Processor+affinity","/w/index.php?title=Special:Book&bookcmd=render_article&arttitle=Processor+affinity&oldid=542954329&writer=rl","/w/index.php?title=Processor_affinity&printable=yes","//ja.wikipedia.org/wiki/%E3%83%97%E3%83%AD%E3%82%BB%E3%83%83%E3%82%B5%E8%A6%AA%E5%92%8C%E6%80%A7","//pl.wikipedia.org/wiki/Koligacja_procesor%C3%B3w","//zh.wikipedia.org/wiki/%E5%A4%84%E7%90%86%E5%99%A8%E4%BA%B2%E5%92%8C%E6%80%A7","//www.wikidata.org/wiki/Special:ItemByTitle/enwiki/Processor affinity","//en.wikipedia.org/wiki/Wikipedia:Text_of_Creative_Commons_Attribution-ShareAlike_3.0_Unported_License","//creativecommons.org/licenses/by-sa/3.0/","//wikimediafoundation.org/wiki/Terms_of_Use","//www.wikimediafoundation.org/","//en.wikipedia.org/wiki/Wikipedia:Contact_us","//wikimediafoundation.org/wiki/Privacy_policy","/wiki/Wikipedia:About","/wiki/Wikipedia:General_disclaimer","http://en.m.wikipedia.org/wiki/Processor_affinity","//wikimediafoundation.org/","//bits.wikimedia.org/images/wikimedia-button.png","//www.mediawiki.org/","//bits.wikimedia.org/static-1.21wmf10/skins/common/images/poweredby_mediawiki_88x31.png","//bits.wikimedia.org/en.wikipedia.org/load.php?debug=false&lang=en&modules=skins.vector&only=scripts&skin=vector&*","/w/index.php?title=MediaWiki:Gadget-ReferenceTooltips.js&action=raw&ctype=text/javascript&508635914","//bits.wikimedia.org/en.wikipedia.org/load.php?debug=false&lang=en&modules=site&only=scripts&skin=vector&*"],"instances":["computing","computing","computing"],"pdf":["http://www.tmurgent.com/WhitePapers/ProcessorAffinity.pdf"],"categories":["Scheduling algorithms"],"headings":["See also","References","External links"],"image":["//upload.wikimedia.org/wikipedia/en/f/f4/Ambox_content.png","//upload.wikimedia.org/wikipedia/en/thumb/f/f2/Edit-clear.svg/40px-Edit-clear.svg.png","//upload.wikimedia.org/wikipedia/commons/thumb/5/52/Acap.svg/36px-Acap.svg.png","//upload.wikimedia.org/wikipedia/en/thumb/f/f2/Edit-clear.svg/40px-Edit-clear.svg.png","//bits.wikimedia.org/static-1.21wmf10/skins/vector/images/search-ltr.png?303-4","//bits.wikimedia.org/images/wikimedia-button.png","//bits.wikimedia.org/static-1.21wmf10/skins/common/images/poweredby_mediawiki_88x31.png"],"tags":[["process","computing"],["thread","computing"],["load_balancing","computing"]],"members":["thread","load_balancing","process"],"related":["Scheduling_algorithm","Symmetric_multiprocessing","Process_(computing)","Thread_(computing)","Central_processing_unit","CPU_cache","Load_balancing_(computing)","Multi-core_processor","Hyper-threading","Central_processing_unit","Linux","Silicon_Graphics","NetBSD","FreeBSD","NetBSD","FreeBSD","Windows_NT","MSDN_Library","MSDN_Library","Mac_OS_X","Affinity_mask"]}